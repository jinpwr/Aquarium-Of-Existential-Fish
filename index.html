<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Static GLB Fish Test</title>
  <style>
    html, body { margin: 0; height: 100%; background: #000; overflow: hidden; }
  </style>
</head>
<body>
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
    import { GLTFLoader } from 'https://unpkg.com/three@0.160.0/examples/jsm/loaders/GLTFLoader.js';

    // --- Scene setup ---
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    const camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 0.1, 100);
    camera.position.set(0, 1, 3);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(innerWidth, innerHeight);
    document.body.appendChild(renderer.domElement);

    // --- Light ---
    const light = new THREE.HemisphereLight(0xffffff, 0x444444, 1.2);
    scene.add(light);

    // --- Load the fish ---
    const loader = new GLTFLoader();
    loader.load(
      'models/fish.glb',
      (gltf) => {
        const fish = gltf.scene;

        // scale & center the model
        const box = new THREE.Box3().setFromObject(fish);
        const size = new THREE.Vector3();
        box.getSize(size);
        const maxDim = Math.max(size.x, size.y, size.z);
        const scale = 2 / maxDim;
        fish.scale.setScalar(scale);

        box.setFromObject(fish);
        const center = new THREE.Vector3();
        box.getCenter(center);
        fish.position.sub(center);

        scene.add(fish);
        renderer.render(scene, camera);
        console.log('✅ fish.glb loaded and shown.');
      },
      undefined,
      (error) => {
        console.error('❌ failed to load fish.glb', error);
      }
    );

    // --- Resize handler ---
    window.addEventListener('resize', () => {
      camera.aspect = innerWidth / innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
      renderer.render(scene, camera);
    });
  </script>
</body>
</html>
